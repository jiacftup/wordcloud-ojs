<div class="pkp_block block_Keywordcloud">
  <span class="title">KEYWORD</span>
  <div class="content">
    <!-- 1) Container untuk word cloud -->
    <div id="wordcloud" style="width:400px; height:400px; margin:0 auto;"></div>
  </div>
</div>

<!-- 2) Load D3 v4 dan plugin d3-cloud -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3-cloud@1/build/d3.layout.cloud.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // 3) Data kata [text, size]
  var raw = [
    ['Artificial Intelligence',15],
    ['Machine Learning',15],
    ['Cyber Security',15],
    ['Big Data',15],
    ['Software Engineering',15],
    ['Cloud Computing',15],
    ['Data Science',15],
    ['IoT',20],
    ['Computer Vision',15],
    ['NLP',20],
    ['Data Mining',15],
    ['Information Systems',15],
    ['Mobile App',15],
    ['Blockchain',15],
    ['Web Development',15],
    ['Network Security',15],
    ['HCI',20],
    ['Database',15],
    ['Augmented Reality',15],
    ['Game Dev',15]
  ];

  // 4) Konversi ke objek {text,size}
  var words = raw.map(function(d){
    return { text: d[0], size: d[1] };
  });

  var container = document.getElementById('wordcloud');
  var W = container.clientWidth;
  var H = container.clientHeight;

  var fill = d3.scaleOrdinal(d3.schemeCategory10);

  // 5) Buat layout
  d3.layout.cloud()
    .size([W, H])
    .words(words)
    .padding(2)
    .rotate(function(){ return ~~(Math.random()*2)*90; })
    .font("Impact")
    .fontSize(function(d){ return d.size; })
    .on("end", draw)
    .start();

  // 6) Render SVG
  function draw(words) {
    d3.select("#wordcloud").append("svg")
      .attr("width", W)
      .attr("height", H)
    .append("g")
      .attr("transform", "translate(" + W/2 + "," + H/2 + ")")
    .selectAll("text")
      .data(words)
    .enter().append("text")
      .style("font-family", "Impact")
      .style("fill", function(d,i){ return fill(i); })
      .style("font-size", function(d){ return d.size + "px"; })
      .attr("text-anchor", "middle")
      .attr("transform", function(d){
        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
      })
      // 7) Klik â†’ ke search URL
      .on("click", function(d){
        var slug = encodeURIComponent("*"+d.text+"*");
        window.open(
          "https://journal.univpancasila.ac.id/index.php/asiimetrik/search?query=" + slug,
          "_blank"
        );
      });
  }
});
</script>
